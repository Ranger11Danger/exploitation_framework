from plugin_manager.manager import plugin_manager
from cmd2 import with_argparser
import argparse
from libs.comm import send_msg, my_proto
import json

argparser = argparse.ArgumentParser()
argparser.add_argument('-c', help="command to run", required=True)


class test(plugin_manager):
    @with_argparser(argparser)
    def do_run(self,args):
        proto = my_proto(message_type="command", data=args.c, channel="1", filename="None")
        
        data = send_msg(self.connections[int(self.current_session)], proto)

        print(data.data)